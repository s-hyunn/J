package c01;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Membertest {

	public static void main(String[] args) throws ClassNotFoundException, SQLException {
		List<Member> list = new ArrayList<>();
		Scanner sc = new Scanner(System.in);
		Class.forName("oracle.jdbc.OracleDriver");

		String url = "jdbc:oracle:thin:@localhost:1521:xe";
		String id = "green";
		String pw = "1234";

		// ì ‘ì†ë‹´ë‹¹ -connection
		Connection conn = DriverManager.getConnection(url, id, pw);

		// ì¿¼ë¦¬ì‹¤í–‰- Statement import sql ê²ƒ ì‚¬ìš© ì¤‘ìš”!!!
		Statement stmt = conn.createStatement();
		Member m1 = new Member();

//		System.out.println("íšŒì›ê°€ì…ì„ ì§„í–‰í•©ë‹ˆë‹¤");
//
//		System.out.println("ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
//		m1.setId(sc.nextLine());
//
//		System.out.println("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
//		m1.setPw(sc.nextLine());
//
//		System.out.println("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
//		m1.setName(sc.nextLine());
//
//		System.out.println("ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
//		m1.setPhone(sc.nextLine());
//
//		System.out.println("ë“±ê¸‰ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
//		m1.setGrade(sc.nextLine());
//
//		String query = "INSERT INTO tbl_member VALUES (" 
//				+ "'" + m1.getId() + "', " 
//				+ "'" + m1.getPw() + "', "
//				+ "'" + m1.getName() + "', " 
//				+ "'" + m1.getPhone() + "', " 
//				+ "'" + m1.getGrade() + "') ";
//		
//		
//
//		int result = stmt.executeUpdate(query);
//
//		System.out.println("result: " + result);
//
//		System.out.println("íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
//		
//		
		// ê²Œì‹œê¸€ ì‘ì„±
		
		// ê²Œì‹œê¸€ ì‘ì„±
        Board b1 = new Board();
        Statement stmt1 = conn.createStatement();

        System.out.println("ğŸ“Œ ê²Œì‹œê¸€ ì‘ì„±ì„ ì§„í–‰í•©ë‹ˆë‹¤");

        System.out.print("ê¸€ ë²ˆí˜¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”: ");
        b1.setBno(sc.nextLine());

        System.out.print("ê¸€ ì œëª©ì„ ì‘ì„±í•´ì£¼ì„¸ìš”: ");
        b1.setTitle(sc.nextLine());

        System.out.print("ê²Œì‹œê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”: ");
        b1.setContent(sc.nextLine());

        System.out.print("ì‘ì„±ì ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”: ");
        b1.setWriter(sc.nextLine());

        String query1 = "INSERT INTO tbl_board VALUES (" 
                + "'" + b1.getBno() + "', " 
                + "'" + b1.getTitle() + "', "
                + "'" + b1.getContent() + "', " 
                + "'" + b1.getWriter() + "', SYSDATE)";

        int result1 = stmt1.executeUpdate(query1);

        System.out.println("âœ… ê²Œì‹œê¸€ ì‘ì„± ì™„ë£Œ!");
        System.out.println("ë“±ë¡ ê²°ê³¼: " + result1 + "ê±´ ì…ë ¥ë¨");
        
        ResultSet rs = stmt2.executeQuery(query2);

        System.out.println("\nğŸ“‹ ê²Œì‹œê¸€ ëª©ë¡ì„ ì¶œë ¥í•©ë‹ˆë‹¤");
        System.out.println("ë²ˆí˜¸\tì œëª©\të‚´ìš©\tì‘ì„±ì\tì‘ì„±ì¼");

        while (rs.next()) {
            String bno = rs.getString("bno");
            String title = rs.getString("title");
            String content = rs.getString("content");
            String writer = rs.getString("writer");
            Date regdate = rs.getDate("regdate"); // ë˜ëŠ” getTimestamp() ê°€ëŠ¥

            System.out.println(bno + "\t" + title + "\t" + content + "\t" + writer + "\t" + regdate);
        }
        // ìì› ì •ë¦¬ (ì„ íƒ)
//        stmt1.close();
//        stmt.close();
//        conn.close();
    }
}

